{% extends "mouse_cat/base.html" %}

{% block content %}
<div id="content" class="old_ratonGato">
        <div class="search">
        <ul class="filtro">
            <li><a href="#">Filtrar partidas</a>
                <ul class="categorias">
                    <li><a href="{% url 'select_game' tipo=1 %}">Sin filtro</a></li>
                    <li><a href="{% url 'select_game' tipo=1 filter=1 %}">Jugando como gato</a></li>
                    <li><a href="{% url 'select_game' tipo=1 filter=2 %}">Jugando como raton</a></li>
                    <li><a href="{% url 'select_game' tipo=1 filter=3 %}">Mi turno</a></li>
                </ul>
            </li>
        </ul>
    </div>

    {% if not games %}
        No estas jugando ninguna partida, o no hay coincidencias con el filtro aplicado
    {% else %}
        <h1>Select game</h1>
        <div class=main-select>
            <table class=tabla-juegos>
            <thead>
                <tr>
                    <th>Usuario gato</th>
                    <th>Usuario raton</th>
                    <th>Id juego</th>
                    <th>Turno actual</th>
                    <th>Jugar</th>
                </tr>
            </thead>
            {% for game in games %}
                <tr>
                    <td>{{game.cat_user}}</td>
                    <td>{{game.mouse_user}}</td>
                    <td>{{game.id}}</td>
                    {% if game.cat_turn == True %}
                        <td>Turno gato</td>
                    {% else %}
                        <td>Turno raton</td>
                    {% endif %}
                    {% if request.user == game.cat_user %}
                        <td><a href="{% url 'select_game' tipo=1 game_id=game.id %}"><img src="/static/img/gato.png" alt="Catimage" class="imagestylesmall"></a></td>

                    {% elif request.user == game.mouse_user %}
                        <td><a href="{% url 'select_game' tipo=1 game_id=game.id %}"><img src="/static/img/raton.png" alt="Mouseimage" class="imagestylesmall"></a></td>
                    {% endif %}

                </tr>
            {% endfor %}
            </table>
            <span class="align-content-center">
                {% if games.has_previous %}
                    <a href="?page={{ games.previous_page_number }}"><img src="/static/img/previous_table.png" alt="Previous_table" class="imagestylesmall"></a>
                {% endif %}

                <span class="current">
                    Page {{ games.number }} of {{ games.paginator.num_pages }}
                </span>

                {% if games.has_next %}
                    <a href="?page={{ games.next_page_number }}"><img src="/static/img/next_table.png" alt="Next_table" class="imagestylesmall"></a>
                {% endif %}
            </span>
        </div>
    {% endif %}
    <p><a href="{% url 'landing' %}">Return to homepage</a></p>
</div>
{% endblock content %}
